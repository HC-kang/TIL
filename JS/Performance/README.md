# JS Performance

## 개요

안녕하세요! 오늘은 JavaScript의 성능을 향상시키는 작은 습관들에 대해 알아보려고 합니다.
흔히 JS라고 하면 이래저래 덧쓰여져 만들어진 근본없는 언어이고, 성능도 좋지 않다고 생각하시는데요, 사실 이는 맞는말입니다.

저도 처음에는 JS라는 언어를 별로 좋아하지 않았지만, 어째 알면 알 수록 '시작부터 뭔가 잘못된 것 같지만 어찌저찌 하나씩 기워 가며 그래도 열심히 살아가는' 우리네 인생과 비슷하다는 생각이 들더라구요.

아무튼, 이 느리고 불편하다고들 말씀하시는 JS를 어떻게 하면 조금이라도 더 빠르고 효율적으로 사용할 수 있을지에 대해 이론적으로 알아보고, 직접 코드를 실행해서 벤치마크를 해보려고 합니다.

## 주요 주제

- 0. 접두사 확인하기
- 1. 문자열 비교
- 2. Object의 형태
- 3. Array 메소드 vs for loop
- 4. Object 속성에 대한 접근
- 5. 캐시 미스
  - 5-1. 메모리 풀링
- 6. 큰 Object
  - 6-1. 큰 Object with GC
- 7. 문자열 변조
  - 7-1. 문자열 변조 with GC
- 8. 각 루프별 성능 비교

## 내용

### 0. 각 Loop별 성능

- 직접 측정

  | Idx | Loop Type    | Average Time (ms) | Average Memory (MB) |
  | --- | ------------ | ----------------- | ------------------- |
  | 1   | while        | 39.664            | 0.079               |
  | 2   | for          | 40.424            | 0.079               |
  | 3   | for2         | 40.497            | 0.079               |
  | 4   | while2       | 41.098            | 0.08                |
  | 5   | forOf        | 90.048            | -0.01               |
  | 6   | reduce       | 108.514           | 0.082               |
  | 7   | forEach      | 109.122           | 0.082               |
  | 8   | filter       | 117.751           | 0.08                |
  | 9   | map          | 133.535           | 0.0                 |
  | 10  | forIn        | 1044.797          | 40.952              |


- Benchmark.js

    | Idx | Loop Type    | Time (ms)  | Memory (MB) | Performance (ops/sec) ±% | Runs Sampled |
    | --- |--------------|------------|-------------|--------------------------|--------------|
    |   1 | While loop   | 19.226     | 0.000       | 2.26 ±4.10%              | 10           |
    |   2 | For loop     | 26.809     | 0.000       | 2.30 ±1.26%              | 10           |
    |   3 | Reduce loop  | 83.867     | 0.000       | 1.97 ±1.59%              | 9            |
    |   4 | For of loop  | 85.277     | 0.000       | 2.00 ±1.86%              | 9            |
    |   5 | ForEach loop | 93.922     | 0.000       | 1.90 ±2.44%              | 9            |
    |   6 | Filter loop  | 148.784    | 0.000       | 1.76 ±2.38%              | 9            |
    |   7 | Map loop     | 200.299    | 0.000       | 1.58 ±2.50%              | 8            |
    |   8 | For in loop  | 1344.171   | 0.000       | 0.62 ±3.18%              | 6            |


### 1. 문자열 비교

### 2. Object의 형태

### 3. Array 메소드 vs for loop

### 4. Object 접근

### 5. 캐시 미스

### 6. 큰 Object

### 7. 문자열 변조

### 8. 케이스 처리의 우선순ㄴ위

### 9. 적절한 데이터 구조

## 참고

- https://www.youtube.com/watch?v=koky8mDdtAk
- https://romgrk.com/posts/optimizing-javascript#6-avoid-large-objects
