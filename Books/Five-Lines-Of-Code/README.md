# Five Lines of Code

## 01장 리팩터링하기

- 높은 품질의 코드가 가지는 장점
  - 유지관리 비용을 절감한다.
  - 오류를 줄인다.
  - 개발자의 만족도를 향상시킨다.
- 높은 품질의 코드를 만드는 방법: 리팩터링
- 그럼에도 사람들은 리팩토링을 잘 하지 않는다.
  - 코드 스멜을 찾아내거나, 단위 테스트를 가지고 리팩터링을 하는 것은 **어렵다**.
- 리팩터링을 위한 일반적인 요건
  - 스킬
    - 어떤 코드가 문제가 될 수 있고, 이를 개선 할 수 있는지 알아야 한다. (코드 스멜)
      - 이는 습득하기 어려운 스킬이다.
  - 문화
    - 리팩터링에 들이는 시간을 용인하고, 권장하는 문화가 필요하다.
    - 일반적으로 레드-그린-리팩터링 사이클을 따른다.
      - 하지만 이 케이스는 레거시 시스템에 대한 리팩터링에 적합하지 않다.
  - 도구
    - 우리의 작업이 안전하다는것을 보장할 무언가가 필요하다.
    - 일반적으로 **자동화된 테스트**를 사용한다.

### 1.1 리팩터링이란 무엇인가?

- 리팩터링의 가장 간단한 정의
  - 기능을 변경하지 않고 코드를 변경하는 것
- 리팩터링의 목적
  - 좋은 코드를 만들기 위함.
    - 좋은 코드란?
      - 의도한 대로 동작하고
      - 사람이 읽기 쉬우며
      - 유지보수가 용이한 코드

- 예제

  ```ts
  // before
  return pow(base, exp / 2) * pow(base, exp / 2);

  // after
  let result = pow(base, exp / 2);
  return result * result;
  ```

### 1.2 스킬: 무엇을 리팩터링할 것인가?

- 앞서 다루었듯, 코드스멜을 찾아내는것은 어렵다.
- 따라서 이 책에서는 정형화된, 쉽게 인식하고 적용 할 수 있는 규칙을 제시하고자 함.

#### 1.2.1 코드 스멜의 예

> 함수는 한 가지 작업을 수행해야 한다.

- 굉장히 유명한 지침이지만, 판단이 어렵다.
- 아래의 예시는 과연 하나의 작업을 수행하는가?

```ts
let result = pow(base, exp / 2);
return result * result;
```

  - 이 코드는 나누고, 제곱한 뒤, 곱하는 세 가지 작업을 수행하는 것인가?
  - 아니면 결과적으로 하나의 값을 얻고, 상태를 변화시키지 않으므로 한가지 작업인가?

#### 1.2.2 규칙의 예

> 다섯 줄 제한

- 이 규칙은, 자전거의 보조바퀴와 같다. 도움을 줄 수 있지만 필수는 아니고, 방해가 될 수도 있다.
  - 항상 지켜야 하는것은 아니다.
  - 그러나 적용한다면, 코드의 품질을 높이는 데에 도움이 될 수 있다.
  - 하지만 반대로 이 규칙을 지키지 않는다고 해서 나쁜 코드를 작성하는 것은 아니다.

### 1.3 문화: 리팩터링은 언제 할까?

#### 1.3.1 레거시 시스템에서의 리팩터링

#### 1.3.2 언제 리팩터링을 하지 말아야 할까?

### 1.4 도구: (안전한) 리팩털이 방법

### 1.5 시작하는 데 필요한 도구

#### 1.5.1 프로그래밍 언어: 타입스크립트

#### 1.5.2 편집기: 비주얼 스튜디오 코드

#### 1.5.3 버전 관리: Git

### 1.6 핵심 예제: 2D 퍼즐 게임

#### 1.6.1 연습만이 살 길이다: 두 번째 코드베이스

### 1.7 실제 환경에서 소프트웨어에 대한 주의사항 요약

## 02장 리팩터링 깊게 들여다보기

## 03장 긴 코드 조각내기

## 04장 타입 코드 처리하기

## 05장 유사한 코드 융합하기

## 06장 데이터 보호

## 07장 컴파일러와의 협업

## 08장 주석 자제하기

## 09장 코드 삭제의 미학

## 10장 코드 추가에 대한 두려움 떨쳐내기

## 11장 코드 구조 따르기

## 12장 최적화 및 일반화 회피

## 13장 나쁜 코드를 식별 가능하게 만들기

## 14장 마무리

## 부록A 실습을 위한 도구 설치
