<html>

<head>
  <meta charset="UTF-8">
  <title>Painter</title>
  <script>

    // drawing tool values
    var LINE_DRAW_TYPE      = 0;
    var RECTANGLE_DRAW_TYPE = 1;
    var ELLIPSE_DRAW_TYPE   = 2;
    var FREE_PATH_DRAW_TYPE = 3;

    // current drawing tool type value
    var g_DrawType = LINE_DRAW_TYPE;

    window.onload = function () {
      // bring toolbar components
      var toolbar = document.getElementById("toolbar");

      var inputImage = createButton("./images/line.gif", "btnLine");
      toolbar.appendChild(inputImage);

      inputImage = createButton("./images/rectangle.gif", "btnRectangle");
      toolbar.appendChild(inputImage);

      inputImage = createButton("./images/ellipse.gif", "btnEllipse");
      toolbar.appendChild(inputImage);

      inputImage = createButton("./images/free_path.gif", "btnFreePath");
      toolbar.appendChild(inputImage);

      // bring canvas components
      var canvas = document.getElementById("mycanvas");
      canvas.width = 600;
      canvas.height = 400;
      canvas.style.border = "1px solid gray";
      canvas.style.cursor = "pointer";

      // bring canvas rendering context
      var ctx = canvas.getContext("2d");

      // set canvas graphic attributes
      ctx.lineWidth = 10;
      ctx.strokeStyle = "red";
      ctx.fillStyle = "blue";

      // draw a rectangle
      var x = 100;
      var y = 50;
      var w = 120;
      var h = 80;

      ctx.fillRect(x, y, w, h);

      ctx.strokeRect(x, y, w, h);

      // add event listeners on draw tool select button
      var btnLine      = document.getElementById("btnLine");
      var btnRectangle = document.getElementById("btnRectangle");
      var btnEllipse   = document.getElementById("btnEllipse");
      var btnFreePath  = document.getElementById("btnFreePath");

      btnLine.addEventListener("click", function (e) {
        setDrawType(LINE_DRAW_TYPE);
      }, false)
      btnRectangle.addEventListener("click", function (e) {
        setDrawType(RECTANGLE_DRAW_TYPE);
      }, false)
      btnEllipse.addEventListener("click", function (e) {
        setDrawType(ELLIPSE_DRAW_TYPE);
      }, false)
      btnFreePath.addEventListener("click", function (e) {
        setDrawType(FREE_PATH_DRAW_TYPE);
      }, false)
    };

    function createButton(imagePath, id) {
      var inputImage = document.createElement("input");
      inputImage.setAttribute("type", "image");
      inputImage.setAttribute("src", imagePath);
      inputImage.setAttribute("id", id);

      return inputImage;

    };

    // set current drawing tool
    function setDrawType(drawType) {
      console.log(drawType);
      g_DrawType = drawType;
    };

  </script>
</head>

<body>
  <div id="painter">
    <div id="toolbar"></div>
    <canvas id="mycanvas"></canvas>
  </div>
</body>

</html>